# ğŸ¤ Contributing to Linux Management System

**ã”å”åŠ›ã‚ã‚ŠãŒã¨ã†ã”ã–ã„ã¾ã™ï¼**

æœ¬ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã¸ã®ã‚³ãƒ³ãƒˆãƒªãƒ“ãƒ¥ãƒ¼ã‚·ãƒ§ãƒ³ã‚’æ­“è¿ã—ã¾ã™ã€‚ãŸã ã—ã€ã“ã®ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã¯ã€Œã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ãƒ•ã‚¡ãƒ¼ã‚¹ãƒˆã€ã®è¨­è¨ˆæ€æƒ³ã‚’æŒã¤ãŸã‚ã€é€šå¸¸ã®OSSãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã¨ã¯ç•°ãªã‚‹å³æ ¼ãªãƒ«ãƒ¼ãƒ«ãŒã‚ã‚Šã¾ã™ã€‚

ã‚³ãƒ³ãƒˆãƒªãƒ“ãƒ¥ãƒ¼ã‚·ãƒ§ãƒ³ã‚’è¡Œã†å‰ã«ã€å¿…ãšæœ¬ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆå…¨ä½“ã‚’ãŠèª­ã¿ãã ã•ã„ã€‚

---

## ğŸ“‹ ç›®æ¬¡

1. [è¡Œå‹•è¦ç¯„](#è¡Œå‹•è¦ç¯„)
2. [è²¢çŒ®ã®ç¨®é¡](#è²¢çŒ®ã®ç¨®é¡)
3. [é–‹ç™ºç’°å¢ƒã®ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—](#é–‹ç™ºç’°å¢ƒã®ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—)
4. [ãƒ–ãƒ©ãƒ³ãƒæˆ¦ç•¥](#ãƒ–ãƒ©ãƒ³ãƒæˆ¦ç•¥)
5. [ã‚³ãƒŸãƒƒãƒˆãƒ¡ãƒƒã‚»ãƒ¼ã‚¸è¦ç´„](#ã‚³ãƒŸãƒƒãƒˆãƒ¡ãƒƒã‚»ãƒ¼ã‚¸è¦ç´„)
6. [Pull Request ã®æµã‚Œ](#pull-request-ã®æµã‚Œ)
7. [ã‚³ãƒ¼ãƒ‰ãƒ¬ãƒ“ãƒ¥ãƒ¼ãƒ—ãƒ­ã‚»ã‚¹](#ã‚³ãƒ¼ãƒ‰ãƒ¬ãƒ“ãƒ¥ãƒ¼ãƒ—ãƒ­ã‚»ã‚¹)
8. [ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£åŸå‰‡ï¼ˆå¿…èª­ï¼‰](#ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£åŸå‰‡å¿…èª­)
9. [ãƒ†ã‚¹ãƒˆè¦ä»¶](#ãƒ†ã‚¹ãƒˆè¦ä»¶)
10. [ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆæ›´æ–°](#ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆæ›´æ–°)

---

## è¡Œå‹•è¦ç¯„

æœ¬ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã¯ã€ä»¥ä¸‹ã®è¡Œå‹•è¦ç¯„ã«åŸºã¥ã„ã¦é‹å–¶ã•ã‚Œã¦ã„ã¾ã™ã€‚

### åŸºæœ¬åŸå‰‡

- **å°Šé‡**: å…¨ã¦ã®è²¢çŒ®è€…ã‚’å°Šé‡ã—ã€å»ºè¨­çš„ãªãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯ã‚’å¿ƒãŒã‘ã‚‹
- **å”åŠ›**: ãƒãƒ¼ãƒ å…¨ä½“ã®æˆåŠŸã‚’å„ªå…ˆã—ã€çŸ¥è­˜ã‚’å…±æœ‰ã™ã‚‹
- **é€æ˜æ€§**: æ„å›³ã‚„å¤‰æ›´ç†ç”±ã‚’æ˜ç¢ºã«èª¬æ˜ã™ã‚‹
- **ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£**: ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ä¸Šã®æ‡¸å¿µãŒã‚ã‚Œã°ã€å³åº§ã«å ±å‘Šã™ã‚‹

### ç¦æ­¢äº‹é …

- âŒ æ”»æ’ƒçš„ãƒ»ä¾®è¾±çš„ãªè¨€å‹•
- âŒ ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£è„†å¼±æ€§ã®å…¬é–‹ï¼ˆ[SECURITY.md](./SECURITY.md) ã‚’å‚ç…§ï¼‰
- âŒ ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£åŸå‰‡ã‚’ç„¡è¦–ã—ãŸPull Request

---

## è²¢çŒ®ã®ç¨®é¡

ä»¥ä¸‹ã®ã‚ˆã†ãªè²¢çŒ®ã‚’æ­“è¿ã—ã¾ã™ã€‚

### 1. ãƒã‚°å ±å‘Š

ãƒã‚°ã‚’ç™ºè¦‹ã—ãŸå ´åˆã¯ã€[GitHub Issues](https://github.com/Kensan196948G/Linux-Management-System/issues) ã§å ±å‘Šã—ã¦ãã ã•ã„ã€‚

**ãƒã‚°ãƒ¬ãƒãƒ¼ãƒˆã«å«ã‚ã‚‹ã¹ãæƒ…å ±**:
- å•é¡Œã®è©³ç´°ãªèª¬æ˜
- å†ç¾æ‰‹é †
- æœŸå¾…ã•ã‚Œã‚‹å‹•ä½œ
- å®Ÿéš›ã®å‹•ä½œ
- ç’°å¢ƒæƒ…å ±ï¼ˆOSã€Pythonãƒãƒ¼ã‚¸ãƒ§ãƒ³ç­‰ï¼‰
- ãƒ­ã‚°ã‚„ã‚¹ã‚¯ãƒªãƒ¼ãƒ³ã‚·ãƒ§ãƒƒãƒˆï¼ˆè©²å½“ã™ã‚‹å ´åˆï¼‰

### 2. æ©Ÿèƒ½ææ¡ˆ

æ–°æ©Ÿèƒ½ã®ææ¡ˆã¯ Issue ã§è¡Œã£ã¦ãã ã•ã„ã€‚ãŸã ã—ã€ä»¥ä¸‹ã‚’è€ƒæ…®ã—ã¦ãã ã•ã„ã€‚

**ææ¡ˆå‰ã®ç¢ºèªäº‹é …**:
- âœ… ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£åŸå‰‡ã«é•åã—ãªã„ã‹ï¼Ÿ
- âœ… allowlistæ€æƒ³ã«é©åˆã™ã‚‹ã‹ï¼Ÿ
- âœ… sudoæ¨©é™ã®æ‹¡å¤§ã«ã¤ãªãŒã‚‰ãªã„ã‹ï¼Ÿ
- âœ… ç›£æŸ»è¨¼è·¡ãŒç¶­æŒã•ã‚Œã‚‹ã‹ï¼Ÿ

### 3. ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆæ”¹å–„

ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã®èª¤å­—ãƒ»è„±å­—ã€åˆ†ã‹ã‚Šã«ãã„è¡¨ç¾ã®æ”¹å–„ã‚’æ­“è¿ã—ã¾ã™ã€‚

### 4. ã‚³ãƒ¼ãƒ‰è²¢çŒ®

ã‚³ãƒ¼ãƒ‰å¤‰æ›´ã¯ã€æœ¬ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã®ãƒ«ãƒ¼ãƒ«ã«å¾“ã£ã¦ Pull Request ã‚’é€ã£ã¦ãã ã•ã„ã€‚

---

## é–‹ç™ºç’°å¢ƒã®ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—

é–‹ç™ºã‚’å§‹ã‚ã‚‹å‰ã«ã€é–‹ç™ºç’°å¢ƒã‚’ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—ã—ã¦ãã ã•ã„ã€‚

è©³ç´°ã¯ [ENVIRONMENT.md](./ENVIRONMENT.md) ã‚’å‚ç…§ã—ã¦ãã ã•ã„ã€‚

### ã‚¯ã‚¤ãƒƒã‚¯ã‚¹ã‚¿ãƒ¼ãƒˆ

```bash
# ãƒªãƒã‚¸ãƒˆãƒªã®ã‚¯ãƒ­ãƒ¼ãƒ³
git clone https://github.com/Kensan196948G/Linux-Management-System.git
cd Linux-Management-System

# ä»®æƒ³ç’°å¢ƒã®ä½œæˆã¨ã‚¢ã‚¯ãƒ†ã‚£ãƒ™ãƒ¼ãƒˆ
python3 -m venv venv
source venv/bin/activate

# ä¾å­˜é–¢ä¿‚ã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«
pip install -r backend/requirements.txt
pip install -r backend/requirements-dev.txt

# é–‹ç™ºã‚µãƒ¼ãƒãƒ¼ã®èµ·å‹•
cd backend
uvicorn api.main:app --reload
```

---

## ãƒ–ãƒ©ãƒ³ãƒæˆ¦ç•¥

æœ¬ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã¯ **Git Flow** ã«åŸºã¥ã„ãŸãƒ–ãƒ©ãƒ³ãƒæˆ¦ç•¥ã‚’æ¡ç”¨ã—ã¦ã„ã¾ã™ã€‚

### ãƒ–ãƒ©ãƒ³ãƒã®ç¨®é¡

| ãƒ–ãƒ©ãƒ³ãƒå | ç”¨é€” | å‘½åè¦å‰‡ | ä¾‹ |
|----------|------|---------|---|
| **main** | æœ¬ç•ªç’°å¢ƒ | - | `main` |
| **develop** | é–‹ç™ºçµ±åˆ | - | `develop` |
| **feature/** | æ©Ÿèƒ½è¿½åŠ  | `feature/<æ©Ÿèƒ½å>` | `feature/user-management` |
| **bugfix/** | ãƒã‚°ä¿®æ­£ | `bugfix/<ãƒã‚°å>` | `bugfix/auth-token-expiry` |
| **hotfix/** | ç·Šæ€¥ä¿®æ­£ | `hotfix/<ä¿®æ­£å>` | `hotfix/security-patch` |
| **security/** | ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ä¿®æ­£ | `security/<CVEç•ªå·ã¾ãŸã¯å†…å®¹>` | `security/shell-injection-fix` |

### ãƒ–ãƒ©ãƒ³ãƒä½œæˆã®æµã‚Œ

```bash
# æœ€æ–°ã®developãƒ–ãƒ©ãƒ³ãƒã‹ã‚‰ä½œæˆ
git checkout develop
git pull origin develop

# æ©Ÿèƒ½ãƒ–ãƒ©ãƒ³ãƒã®ä½œæˆ
git checkout -b feature/my-new-feature

# ä½œæ¥­å¾Œã€ãƒªãƒ¢ãƒ¼ãƒˆã«ãƒ—ãƒƒã‚·ãƒ¥
git push -u origin feature/my-new-feature
```

### ãƒãƒ¼ã‚¸æˆ¦ç•¥

- **feature/bugfix â†’ develop**: Pull RequestçµŒç”±ã§ãƒãƒ¼ã‚¸
- **develop â†’ main**: ãƒªãƒªãƒ¼ã‚¹æ™‚ã«ãƒãƒ¼ã‚¸ï¼ˆãƒªãƒªãƒ¼ã‚¹æ‹…å½“è€…ã®ã¿ï¼‰
- **hotfix â†’ main + develop**: ç·Šæ€¥ä¿®æ­£æ™‚ã®ã¿

---

## ã‚³ãƒŸãƒƒãƒˆãƒ¡ãƒƒã‚»ãƒ¼ã‚¸è¦ç´„

ã‚³ãƒŸãƒƒãƒˆãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã¯ã€ä»¥ä¸‹ã®å½¢å¼ã«å¾“ã£ã¦ãã ã•ã„ã€‚

### ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆ

```
<type>(<scope>): <subject>

<body>

<footer>
```

### Typeï¼ˆç¨®é¡ï¼‰

| Type | èª¬æ˜ | ä¾‹ |
|------|------|---|
| `feat` | æ–°æ©Ÿèƒ½è¿½åŠ  | `feat(auth): Add JWT token refresh` |
| `fix` | ãƒã‚°ä¿®æ­£ | `fix(api): Fix service restart validation` |
| `security` | ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ä¿®æ­£ | `security(sudo): Prevent shell injection` |
| `docs` | ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆæ›´æ–° | `docs(readme): Update installation steps` |
| `test` | ãƒ†ã‚¹ãƒˆè¿½åŠ ãƒ»ä¿®æ­£ | `test(auth): Add token expiry tests` |
| `refactor` | ãƒªãƒ•ã‚¡ã‚¯ã‚¿ãƒªãƒ³ã‚° | `refactor(api): Simplify error handling` |
| `style` | ã‚³ãƒ¼ãƒ‰ã‚¹ã‚¿ã‚¤ãƒ«ä¿®æ­£ | `style(backend): Apply black formatting` |
| `chore` | ãƒ“ãƒ«ãƒ‰ãƒ»è¨­å®šå¤‰æ›´ | `chore(deps): Update fastapi to 0.115.6` |
| `ci` | CI/CDè¨­å®šå¤‰æ›´ | `ci(github): Add security scan workflow` |

### Scopeï¼ˆç¯„å›²ï¼‰

- `auth`: èªè¨¼ãƒ»èªå¯
- `api`: ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰API
- `frontend`: ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰
- `sudo`: sudoãƒ©ãƒƒãƒ‘ãƒ¼
- `audit`: ç›£æŸ»ãƒ­ã‚°
- `db`: ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹
- `docs`: ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ
- `tests`: ãƒ†ã‚¹ãƒˆ
- `ci`: CI/CD

### ä¾‹

```bash
# è‰¯ã„ä¾‹
git commit -m "feat(auth): Add role-based access control

Implement RBAC with four roles: Viewer, Operator, Approver, Admin.
Each role has specific permissions defined in allowlist.

Closes #42"

# æ‚ªã„ä¾‹
git commit -m "Fixed stuff"  # ä½•ã‚’ä¿®æ­£ã—ãŸã‹ä¸æ˜
git commit -m "WIP"          # ä½œæ¥­ä¸­ã®ã‚³ãƒŸãƒƒãƒˆã¯é¿ã‘ã‚‹
```

### Co-Authored-Byï¼ˆClaudeCodeé€£æºæ™‚ï¼‰

ClaudeCodeã¨å…±åŒã§ä½œæ¥­ã—ãŸå ´åˆã¯ã€ä»¥ä¸‹ã‚’è¿½åŠ ã—ã¦ãã ã•ã„ã€‚

```
Co-Authored-By: Claude Sonnet 4.5 (1M context) <noreply@anthropic.com>
```

---

## Pull Request ã®æµã‚Œ

Pull Requestï¼ˆPRï¼‰ã‚’ä½œæˆã™ã‚‹éš›ã¯ã€ä»¥ä¸‹ã®æ‰‹é †ã«å¾“ã£ã¦ãã ã•ã„ã€‚

### 1. PRä½œæˆå‰ã®ãƒã‚§ãƒƒã‚¯ãƒªã‚¹ãƒˆ

**å¿…é ˆé …ç›®**:
- [ ] å…¨ã¦ã®ãƒ†ã‚¹ãƒˆãŒãƒ‘ã‚¹ã™ã‚‹ï¼ˆ`pytest tests/ -v`ï¼‰
- [ ] ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ãƒã‚§ãƒƒã‚¯ãŒãƒ‘ã‚¹ã™ã‚‹ï¼ˆ`bandit -r backend/`ï¼‰
- [ ] ã‚³ãƒ¼ãƒ‰ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆãŒé©ç”¨ã•ã‚Œã¦ã„ã‚‹ï¼ˆ`black backend/`ï¼‰
- [ ] ãƒªãƒ³ãƒˆã‚¨ãƒ©ãƒ¼ãŒãªã„ï¼ˆ`flake8 backend/`ï¼‰
- [ ] ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆãŒæ›´æ–°ã•ã‚Œã¦ã„ã‚‹ï¼ˆè©²å½“ã™ã‚‹å ´åˆï¼‰
- [ ] CHANGELOG.md ãŒæ›´æ–°ã•ã‚Œã¦ã„ã‚‹ï¼ˆæ©Ÿèƒ½è¿½åŠ ãƒ»å¤‰æ›´ã®å ´åˆï¼‰

**ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£å¿…é ˆãƒã‚§ãƒƒã‚¯**:
- [ ] `shell=True` ã‚’ä½¿ç”¨ã—ã¦ã„ãªã„
- [ ] `eval()` / `exec()` ã‚’ä½¿ç”¨ã—ã¦ã„ãªã„
- [ ] ç‰¹æ®Šæ–‡å­—ã®æ¤œè¨¼ãŒå®Ÿè£…ã•ã‚Œã¦ã„ã‚‹
- [ ] sudoæ“ä½œã¯ãƒ©ãƒƒãƒ‘ãƒ¼çµŒç”±ã®ã¿
- [ ] æ–°è¦æ“ä½œãŒallowlistã«ç™»éŒ²ã•ã‚Œã¦ã„ã‚‹

### 2. PRãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆ

PRã‚’ä½œæˆã™ã‚‹éš›ã¯ã€ä»¥ä¸‹ã®ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã‚’ä½¿ç”¨ã—ã¦ãã ã•ã„ã€‚

```markdown
## Summary
<!-- å¤‰æ›´å†…å®¹ã®æ¦‚è¦ã‚’è¨˜è¿° -->

## Motivation
<!-- ãªãœã“ã®å¤‰æ›´ãŒå¿…è¦ã‹ï¼Ÿ -->

## Changes
<!-- å…·ä½“çš„ãªå¤‰æ›´å†…å®¹ -->
- Added: ...
- Changed: ...
- Fixed: ...

## Security Review
<!-- ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£è¦³ç‚¹ã§ã®ç¢ºèªäº‹é … -->
- [ ] No `shell=True` usage
- [ ] Input validation implemented
- [ ] Allowlist updated (if applicable)
- [ ] Audit logging added (if applicable)

## Testing
<!-- ãƒ†ã‚¹ãƒˆå†…å®¹ -->
- [ ] Unit tests added/updated
- [ ] Integration tests added/updated
- [ ] Manual testing performed

## Documentation
<!-- ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆæ›´æ–° -->
- [ ] README.md updated (if applicable)
- [ ] API documentation updated (if applicable)
- [ ] CHANGELOG.md updated

## Related Issues
<!-- é–¢é€£ã™ã‚‹Issueç•ªå· -->
Closes #XXX

## Screenshots
<!-- UIã«å¤‰æ›´ãŒã‚ã‚‹å ´åˆã¯ã‚¹ã‚¯ãƒªãƒ¼ãƒ³ã‚·ãƒ§ãƒƒãƒˆã‚’æ·»ä»˜ -->
```

### 3. PRã®ä½œæˆ

```bash
# å¤‰æ›´ã‚’ã‚³ãƒŸãƒƒãƒˆ
git add .
git commit -m "feat(api): Add user management endpoint"

# ãƒªãƒ¢ãƒ¼ãƒˆã«ãƒ—ãƒƒã‚·ãƒ¥
git push origin feature/user-management

# GitHubã§PRã‚’ä½œæˆ
# https://github.com/Kensan196948G/Linux-Management-System/pulls
```

---

## ã‚³ãƒ¼ãƒ‰ãƒ¬ãƒ“ãƒ¥ãƒ¼ãƒ—ãƒ­ã‚»ã‚¹

å…¨ã¦ã®PRã¯ã€ä»¥ä¸‹ã®ãƒ¬ãƒ“ãƒ¥ãƒ¼ãƒ—ãƒ­ã‚»ã‚¹ã‚’çµŒã¦ãƒãƒ¼ã‚¸ã•ã‚Œã¾ã™ã€‚

### ãƒ¬ãƒ“ãƒ¥ãƒ¼è¦³ç‚¹

#### 1. ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ãƒ¬ãƒ“ãƒ¥ãƒ¼ï¼ˆæœ€å„ªå…ˆï¼‰

**å¿…ãšç¢ºèªã•ã‚Œã‚‹é …ç›®**:
- âŒ `shell=True` ã®ä½¿ç”¨
- âŒ `eval()` / `exec()` ã®ä½¿ç”¨
- âŒ ç‰¹æ®Šæ–‡å­—ãŒæœªæ¤œè¨¼ã®å…¥åŠ›
- âŒ allowlistå¤–ã®æ“ä½œ
- âŒ sudoã®ç›´æ¥å®Ÿè¡Œ
- âœ… å…¥åŠ›æ¤œè¨¼ã®å®Ÿè£…
- âœ… ç›£æŸ»ãƒ­ã‚°ã®è¨˜éŒ²
- âœ… ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°

#### 2. ã‚³ãƒ¼ãƒ‰å“è³ªãƒ¬ãƒ“ãƒ¥ãƒ¼

- ã‚³ãƒ¼ãƒ‰ã®å¯èª­æ€§
- é©åˆ‡ãªå‹ãƒ’ãƒ³ãƒˆï¼ˆPythonï¼‰
- Docstringã®è¨˜è¿°
- å‘½åè¦å‰‡ã®éµå®ˆ
- DRYåŸå‰‡ï¼ˆDon't Repeat Yourselfï¼‰

#### 3. ãƒ†ã‚¹ãƒˆãƒ¬ãƒ“ãƒ¥ãƒ¼

- ãƒ†ã‚¹ãƒˆã‚«ãƒãƒ¬ãƒƒã‚¸ï¼ˆç›®æ¨™: 80%ä»¥ä¸Šï¼‰
- ã‚¨ãƒƒã‚¸ã‚±ãƒ¼ã‚¹ã®ãƒ†ã‚¹ãƒˆ
- ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ãƒ†ã‚¹ãƒˆã®å®Ÿè£…

#### 4. ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆãƒ¬ãƒ“ãƒ¥ãƒ¼

- ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã®æ›´æ–°
- APIãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã®æ­£ç¢ºæ€§
- ã‚³ãƒ¡ãƒ³ãƒˆã®é©åˆ‡æ€§

### ãƒ¬ãƒ“ãƒ¥ãƒ¼ã‚¢ãƒ¼ã®å½¹å‰²

| ãƒ¬ãƒ“ãƒ¥ãƒ¼ã‚¢ãƒ¼ | ç¢ºèªäº‹é … |
|------------|---------|
| **Security Reviewer** | ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£åŸå‰‡ã®éµå®ˆ |
| **Code Reviewer** | ã‚³ãƒ¼ãƒ‰å“è³ªãƒ»è¨­è¨ˆ |
| **QA Reviewer** | ãƒ†ã‚¹ãƒˆã‚«ãƒãƒ¬ãƒƒã‚¸ãƒ»å“è³ª |

### ãƒ¬ãƒ“ãƒ¥ãƒ¼ã®æ‰¿èªåŸºæº–

PRãŒãƒãƒ¼ã‚¸ã•ã‚Œã‚‹ã«ã¯ã€ä»¥ä¸‹ã®æ¡ä»¶ã‚’æº€ãŸã™å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚

- âœ… Security Reviewerã®æ‰¿èªï¼ˆå¿…é ˆï¼‰
- âœ… Code Reviewerã®æ‰¿èªï¼ˆ1åä»¥ä¸Šï¼‰
- âœ… å…¨ã¦ã®CIãƒã‚§ãƒƒã‚¯ãŒãƒ‘ã‚¹
- âœ… ã‚³ãƒ³ãƒ•ãƒªã‚¯ãƒˆã®è§£æ±º

### ãƒ¬ãƒ“ãƒ¥ãƒ¼ã‚³ãƒ¡ãƒ³ãƒˆã¸ã®å¯¾å¿œ

```bash
# ãƒ¬ãƒ“ãƒ¥ãƒ¼ã‚³ãƒ¡ãƒ³ãƒˆã‚’åæ˜ 
git add .
git commit -m "fix(review): Address security review feedback"
git push origin feature/user-management

# PRã¯è‡ªå‹•çš„ã«æ›´æ–°ã•ã‚Œã¾ã™
```

---

## ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£åŸå‰‡ï¼ˆå¿…èª­ï¼‰

**ã“ã®ã‚»ã‚¯ã‚·ãƒ§ãƒ³ã¯å…¨ã¦ã®ã‚³ãƒ³ãƒˆãƒªãƒ“ãƒ¥ãƒ¼ã‚¿ãƒ¼ãŒç†è§£ã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚**

æœ¬ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã¯ã€ä»¥ä¸‹ã®ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£åŸå‰‡ã‚’å³æ ¼ã«éµå®ˆã—ã¦ã„ã¾ã™ã€‚

è©³ç´°ã¯ [CLAUDE.md](./CLAUDE.md) ã‚’å‚ç…§ã—ã¦ãã ã•ã„ã€‚

### 1. Allowlist Firstï¼ˆè¨±å¯ãƒªã‚¹ãƒˆå„ªå…ˆï¼‰

```python
# âœ… è‰¯ã„ä¾‹
ALLOWED_SERVICES = ["nginx", "postgresql", "redis"]
if service_name in ALLOWED_SERVICES:
    restart_service(service_name)

# âŒ æ‚ªã„ä¾‹
restart_service(user_input)  # ä»»æ„ã®ã‚µãƒ¼ãƒ“ã‚¹åã‚’å—ã‘å…¥ã‚Œ
```

### 2. Deny by Defaultï¼ˆãƒ‡ãƒ•ã‚©ãƒ«ãƒˆæ‹’å¦ï¼‰

```python
# âœ… è‰¯ã„ä¾‹
def can_execute(operation):
    return operation in EXPLICIT_ALLOWED_OPS

# âŒ æ‚ªã„ä¾‹
def can_execute(operation):
    return operation not in BLACKLIST  # ãƒ–ãƒ©ãƒƒã‚¯ãƒªã‚¹ãƒˆæ–¹å¼ã¯ç¦æ­¢
```

### 3. Shellç¦æ­¢ï¼ˆshell=True å…¨é¢ç¦æ­¢ï¼‰

```python
# âœ… è‰¯ã„ä¾‹
subprocess.run(["/usr/local/sbin/adminui-status"], check=True)

# âŒ æ‚ªã„ä¾‹
subprocess.run("systemctl status nginx", shell=True)  # çµ¶å¯¾ç¦æ­¢
```

### 4. sudoæœ€å°åŒ–ï¼ˆãƒ©ãƒƒãƒ‘ãƒ¼çµŒç”±å¿…é ˆï¼‰

```python
# âœ… è‰¯ã„ä¾‹
subprocess.run(["sudo", "/usr/local/sbin/adminui-service-restart", "nginx"])

# âŒ æ‚ªã„ä¾‹
subprocess.run(["sudo", "systemctl", "restart", "nginx"])  # ç›´æ¥å®Ÿè¡Œç¦æ­¢
```

### 5. ç›£æŸ»è¨¼è·¡ï¼ˆå…¨æ“ä½œãƒ­ã‚°ï¼‰

```python
# å¿…é ˆãƒ­ã‚°é …ç›®
audit_log = {
    "timestamp": "2026-02-06T12:34:56Z",
    "user_id": "admin@example.com",
    "operation": "service_restart",
    "target": "nginx",
    "result": "success",
    "stdout": "...",
    "stderr": ""
}
```

### äººé–“æ‰¿èªå¿…é ˆãƒã‚¤ãƒ³ãƒˆ

ä»¥ä¸‹ã®å¤‰æ›´ã¯**å¿…ãšäººé–“ã«ã‚ˆã‚‹æ˜ç¤ºçš„ãªæ‰¿èª**ãŒå¿…è¦ã§ã™:

- â— sudoers ãƒ•ã‚¡ã‚¤ãƒ«ã®å¤‰æ›´
- â— æ–°ã—ã„rootæ“ä½œã®è¿½åŠ 
- â— è¨±å¯ãƒªã‚¹ãƒˆã¸ã®ã‚µãƒ¼ãƒ“ã‚¹è¿½åŠ 
- â— æ‰¿èªãƒ•ãƒ­ãƒ¼ã®å¤‰æ›´
- â— å…¥åŠ›ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ãƒ«ãƒ¼ãƒ«ã®ç·©å’Œ

---

## ãƒ†ã‚¹ãƒˆè¦ä»¶

å…¨ã¦ã®ã‚³ãƒ¼ãƒ‰å¤‰æ›´ã«ã¯ã€é©åˆ‡ãªãƒ†ã‚¹ãƒˆãŒå¿…è¦ã§ã™ã€‚

### ãƒ†ã‚¹ãƒˆã‚«ãƒãƒ¬ãƒƒã‚¸ç›®æ¨™

| ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ | ã‚«ãƒãƒ¬ãƒƒã‚¸ç›®æ¨™ |
|--------------|-------------|
| backend/core/ | **90%ä»¥ä¸Š** |
| backend/api/ | **85%ä»¥ä¸Š** |
| wrappers/ | **100%** ï¼ˆå…¨ãƒ‘ã‚¿ãƒ¼ãƒ³ï¼‰ |

### ãƒ†ã‚¹ãƒˆã®ç¨®é¡

#### 1. ãƒ¦ãƒ‹ãƒƒãƒˆãƒ†ã‚¹ãƒˆ

```python
# tests/test_auth.py
def test_token_generation():
    """JWTãƒˆãƒ¼ã‚¯ãƒ³ãŒæ­£ã—ãç”Ÿæˆã•ã‚Œã‚‹ã“ã¨ã‚’ç¢ºèª"""
    token = generate_token(user_id="test@example.com")
    assert token is not None
    assert verify_token(token) == "test@example.com"
```

#### 2. ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ãƒ†ã‚¹ãƒˆ

```python
# tests/test_security.py
def test_reject_shell_injection():
    """ç‰¹æ®Šæ–‡å­—ã‚’å«ã‚€å…¥åŠ›ã‚’æ‹’å¦ã™ã‚‹ã“ã¨"""
    malicious_input = "nginx; rm -rf /"
    with pytest.raises(SecurityError):
        validate_service_name(malicious_input)

def test_allowlist_only():
    """è¨±å¯ãƒªã‚¹ãƒˆå¤–ã®ã‚µãƒ¼ãƒ“ã‚¹ã‚’æ‹’å¦ã™ã‚‹ã“ã¨"""
    with pytest.raises(PermissionError):
        restart_service("malicious-service")
```

#### 3. çµ±åˆãƒ†ã‚¹ãƒˆ

```python
# tests/test_api.py
def test_service_restart_api(client):
    """ã‚µãƒ¼ãƒ“ã‚¹å†èµ·å‹•APIã®çµ±åˆãƒ†ã‚¹ãƒˆ"""
    response = client.post(
        "/api/services/restart",
        json={"service_name": "nginx"},
        headers={"Authorization": f"Bearer {token}"}
    )
    assert response.status_code == 200
```

### ãƒ†ã‚¹ãƒˆã®å®Ÿè¡Œ

```bash
# å…¨ãƒ†ã‚¹ãƒˆã®å®Ÿè¡Œ
pytest tests/ -v

# ã‚«ãƒãƒ¬ãƒƒã‚¸æ¸¬å®š
pytest tests/ -v --cov=backend --cov-report=html

# ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ã‚¹ã‚­ãƒ£ãƒ³
bandit -r backend/

# ã‚³ãƒ¼ãƒ‰å“è³ªãƒã‚§ãƒƒã‚¯
flake8 backend/
black --check backend/
```

---

## ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆæ›´æ–°

ã‚³ãƒ¼ãƒ‰å¤‰æ›´ã«ä¼´ã„ã€ä»¥ä¸‹ã®ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã‚’é©å®œæ›´æ–°ã—ã¦ãã ã•ã„ã€‚

### æ›´æ–°ãŒå¿…è¦ãªãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ

| ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ | æ›´æ–°ã‚¿ã‚¤ãƒŸãƒ³ã‚° |
|------------|--------------|
| **README.md** | æ©Ÿèƒ½è¿½åŠ ã€ä½¿ã„æ–¹ã®å¤‰æ›´ |
| **CHANGELOG.md** | å…¨ã¦ã®å¤‰æ›´ï¼ˆå¿…é ˆï¼‰ |
| **ENVIRONMENT.md** | é–‹ç™ºç’°å¢ƒã®å¤‰æ›´ |
| **docs/api-reference.md** | APIå¤‰æ›´ |
| **CLAUDE.md** | ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ãƒãƒªã‚·ãƒ¼å¤‰æ›´ |

### ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã®æ›¸ãæ–¹

- **æ˜ç¢º**: å°‚é–€ç”¨èªã‚’é¿ã‘ã€åˆå¿ƒè€…ã«ã‚‚åˆ†ã‹ã‚Šã‚„ã™ã
- **å…·ä½“çš„**: æŠ½è±¡çš„ãªèª¬æ˜ã§ã¯ãªãã€å…·ä½“ä¾‹ã‚’ç¤ºã™
- **æœ€æ–°**: å¤ã„æƒ…å ±ã¯å‰Šé™¤ã¾ãŸã¯æ›´æ–°
- **æ§‹é€ åŒ–**: è¦‹å‡ºã—ã€ãƒªã‚¹ãƒˆã€è¡¨ã‚’æ´»ç”¨

---

## Git WorkTree ã®ä½¿ç”¨

æœ¬ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã§ã¯ã€ä¸¦è¡Œé–‹ç™ºã®ãŸã‚ã« Git WorkTree ã‚’æ¨å¥¨ã—ã¦ã„ã¾ã™ã€‚

è©³ç´°ã¯ [agents/README.md](./agents/README.md) ã‚’å‚ç…§ã—ã¦ãã ã•ã„ã€‚

### WorkTree ã®ä½œæˆ

```bash
# æ–°ã—ã„featureãƒ–ãƒ©ãƒ³ãƒã‚’worktreeã¨ã—ã¦ä½œæˆ
git worktree add worktrees/feature-xyz -b feature/xyz

# worktreeå†…ã§ä½œæ¥­
cd worktrees/feature-xyz
# ... ä½œæ¥­ ...

# å®Œäº†å¾Œã€worktreeã‚’å‰Šé™¤
git worktree remove worktrees/feature-xyz
```

---

## ClaudeCode SubAgent ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼

æœ¬ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã¯ ClaudeCode ã® SubAgent æ§‹æˆã‚’æ¡ç”¨ã—ã¦ã„ã¾ã™ã€‚

### SubAgent 7ä½“æ§‹æˆ

1. **@Planner**: ã‚¿ã‚¹ã‚¯åˆ†è§£ãƒ»è¨­è¨ˆ
2. **@Architect**: ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£è¨­è¨ˆ
3. **@Backend**: ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰å®Ÿè£…
4. **@Frontend**: ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰å®Ÿè£…
5. **@Security**: ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ãƒ¬ãƒ“ãƒ¥ãƒ¼ï¼ˆå…¨å¤‰æ›´ã«å¯¾ã—ã¦ä¸¦åˆ—å®Ÿè¡Œï¼‰
6. **@QA**: ãƒ†ã‚¹ãƒˆè¨­è¨ˆãƒ»å®Ÿè£…
7. **@CIManager**: CI/CDç®¡ç†ãƒ»è‡ªå‹•ä¿®å¾©

è©³ç´°ã¯ [CLAUDE.md](./CLAUDE.md) ã‚’å‚ç…§ã—ã¦ãã ã•ã„ã€‚

---

## ãƒˆãƒ©ãƒ–ãƒ«ã‚·ãƒ¥ãƒ¼ãƒ†ã‚£ãƒ³ã‚°

### ã‚ˆãã‚ã‚‹å•é¡Œ

#### 1. ãƒ†ã‚¹ãƒˆãŒå¤±æ•—ã™ã‚‹

```bash
# ä¾å­˜é–¢ä¿‚ã‚’å†ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«
pip install -r backend/requirements-dev.txt

# ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã‚’ãƒªã‚»ãƒƒãƒˆ
rm -f data/dev/database.db

# ãƒ†ã‚¹ãƒˆã‚’å†å®Ÿè¡Œ
pytest tests/ -v
```

#### 2. ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ã‚¹ã‚­ãƒ£ãƒ³ã§ã‚¨ãƒ©ãƒ¼

```bash
# Banditã®ã‚¨ãƒ©ãƒ¼ã‚’ç¢ºèª
bandit -r backend/ -f json -o bandit-report.json

# ã‚¨ãƒ©ãƒ¼å†…å®¹ã‚’ä¿®æ­£å¾Œã€å†ã‚¹ã‚­ãƒ£ãƒ³
bandit -r backend/
```

#### 3. ã‚³ãƒ³ãƒ•ãƒªã‚¯ãƒˆã®è§£æ±º

```bash
# developãƒ–ãƒ©ãƒ³ãƒã®æœ€æ–°ã‚’å–å¾—
git checkout develop
git pull origin develop

# featureãƒ–ãƒ©ãƒ³ãƒã«ãƒãƒ¼ã‚¸
git checkout feature/my-feature
git merge develop

# ã‚³ãƒ³ãƒ•ãƒªã‚¯ãƒˆã‚’è§£æ±º
# ... ãƒ•ã‚¡ã‚¤ãƒ«ç·¨é›† ...
git add .
git commit -m "chore: Resolve merge conflicts"
```

---

## è³ªå•ãƒ»ã‚µãƒãƒ¼ãƒˆ

- **ä¸€èˆ¬çš„ãªè³ªå•**: [GitHub Discussions](https://github.com/Kensan196948G/Linux-Management-System/discussions)
- **ãƒã‚°å ±å‘Š**: [GitHub Issues](https://github.com/Kensan196948G/Linux-Management-System/issues)
- **ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£å ±å‘Š**: [SECURITY.md](./SECURITY.md) ã‚’å‚ç…§

---

## ãƒ©ã‚¤ã‚»ãƒ³ã‚¹

æœ¬ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã¸ã®ã‚³ãƒ³ãƒˆãƒªãƒ“ãƒ¥ãƒ¼ã‚·ãƒ§ãƒ³ã¯ã€ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®ãƒ©ã‚¤ã‚»ãƒ³ã‚¹ï¼ˆ[MIT License](./LICENSE)ï¼‰ã«å¾“ã„ã¾ã™ã€‚

---

**Thank you for contributing to Linux Management System!**

ã‚ãªãŸã®ã‚³ãƒ³ãƒˆãƒªãƒ“ãƒ¥ãƒ¼ã‚·ãƒ§ãƒ³ãŒã€ã‚ˆã‚Šå®‰å…¨ã§ä¿¡é ¼æ€§ã®é«˜ã„Linuxç®¡ç†ã‚·ã‚¹ãƒ†ãƒ ã®å®Ÿç¾ã«è²¢çŒ®ã—ã¾ã™ã€‚
