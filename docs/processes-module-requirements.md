# Running Processes ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ« è¦ä»¶å®šç¾©æ›¸

**ãƒãƒ¼ã‚¸ãƒ§ãƒ³**: 1.0
**ä½œæˆæ—¥**: 2026-02-06
**å¯¾è±¡ãƒ•ã‚§ãƒ¼ã‚º**: v0.2
**ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«åŒºåˆ†**: System - å‚ç…§ç³»

---

## 1. æ–‡æ›¸æ¦‚è¦

| é …ç›® | å†…å®¹ |
|------|------|
| ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«å | Running Processesï¼ˆå®Ÿè¡Œä¸­ãƒ—ãƒ­ã‚»ã‚¹ç®¡ç†ï¼‰ |
| ç›®çš„ | Linuxä¸Šã§å®Ÿè¡Œä¸­ã®ãƒ—ãƒ­ã‚»ã‚¹ã®å¯è¦–åŒ–ãƒ»ç›£è¦– |
| ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ãƒªã‚¹ã‚¯ | **LOW**ï¼ˆå‚ç…§å°‚ç”¨ã€æ“ä½œæ©Ÿèƒ½ãªã—ï¼‰ |
| æƒ³å®šãƒ¦ãƒ¼ã‚¶ãƒ¼ | Viewer / Operator / Adminï¼ˆå…¨ãƒ­ãƒ¼ãƒ«ï¼‰ |

---

## 2. èƒŒæ™¯ãƒ»ç›®çš„

### 2.1 èƒŒæ™¯

* Linuxã‚µãƒ¼ãƒã®é‹ç”¨ã§ã¯ã€å®Ÿè¡Œä¸­ã®ãƒ—ãƒ­ã‚»ã‚¹ã®ç›£è¦–ãŒå¿…é ˆ
* `top`, `ps`, `htop` ã‚³ãƒãƒ³ãƒ‰ã¯CLIæ“ä½œãŒå¿…è¦
* WebUIã‹ã‚‰ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ã«ãƒ—ãƒ­ã‚»ã‚¹çŠ¶æ…‹ã‚’ç¢ºèªã—ãŸã„

### 2.2 ç›®çš„

* **ãƒ—ãƒ­ã‚»ã‚¹ä¸€è¦§ã®WebUIè¡¨ç¤º**ï¼ˆPID, ãƒ—ãƒ­ã‚»ã‚¹å, CPU, ãƒ¡ãƒ¢ãƒª, ãƒ¦ãƒ¼ã‚¶ãƒ¼ç­‰ï¼‰
* **ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ æ›´æ–°**ï¼ˆ5ç§’é–“éš”ã§è‡ªå‹•æ›´æ–°ï¼‰
* **ãƒ•ã‚£ãƒ«ã‚¿ãƒ»ã‚½ãƒ¼ãƒˆæ©Ÿèƒ½**ï¼ˆCPU/ãƒ¡ãƒ¢ãƒªä½¿ç”¨ç‡é †ã€ç‰¹å®šãƒ¦ãƒ¼ã‚¶ãƒ¼ã®ãƒ—ãƒ­ã‚»ã‚¹ã®ã¿è¡¨ç¤ºç­‰ï¼‰
* **ãƒ—ãƒ­ã‚»ã‚¹çµ±è¨ˆæƒ…å ±**ï¼ˆç·æ•°ã€CPUå¹³å‡ã€ãƒ¡ãƒ¢ãƒªåˆè¨ˆç­‰ï¼‰

### 2.3 ã‚¹ã‚³ãƒ¼ãƒ—

#### âœ… å®Ÿè£…ç¯„å›²

* ãƒ—ãƒ­ã‚»ã‚¹æƒ…å ±ã®**å‚ç…§å°‚ç”¨**æ©Ÿèƒ½
* ãƒ—ãƒ­ã‚»ã‚¹ä¸€è¦§ã®å–å¾—
* ç‰¹å®šãƒ—ãƒ­ã‚»ã‚¹ã®è©³ç´°æƒ…å ±å–å¾—
* ãƒ—ãƒ­ã‚»ã‚¹çµ±è¨ˆæƒ…å ±ã®å–å¾—
* ãƒ•ã‚£ãƒ«ã‚¿ãƒ»ã‚½ãƒ¼ãƒˆæ©Ÿèƒ½

#### âŒ å®Ÿè£…ç¯„å›²å¤–ï¼ˆå°†æ¥ãƒ•ã‚§ãƒ¼ã‚ºï¼‰

* ãƒ—ãƒ­ã‚»ã‚¹ã®killæ“ä½œï¼ˆv0.3ä»¥é™ã§æ¤œè¨ï¼‰
* ãƒ—ãƒ­ã‚»ã‚¹ã®å„ªå…ˆåº¦å¤‰æ›´ï¼ˆreniceï¼‰
* ãƒ—ãƒ­ã‚»ã‚¹ã®ã‚·ã‚°ãƒŠãƒ«é€ä¿¡ï¼ˆSIGTERM, SIGKILLç­‰ï¼‰

---

## 3. æ©Ÿèƒ½è¦ä»¶

### 3.1 æ©Ÿèƒ½ä¸€è¦§

| æ©Ÿèƒ½ID | æ©Ÿèƒ½å | å„ªå…ˆåº¦ | èª¬æ˜ |
|--------|--------|--------|------|
| PROC-001 | ãƒ—ãƒ­ã‚»ã‚¹ä¸€è¦§å–å¾— | **å¿…é ˆ** | å®Ÿè¡Œä¸­ã®å…¨ãƒ—ãƒ­ã‚»ã‚¹ã‚’å–å¾— |
| PROC-002 | ãƒ—ãƒ­ã‚»ã‚¹è©³ç´°å–å¾— | **å¿…é ˆ** | ç‰¹å®šPIDã®ãƒ—ãƒ­ã‚»ã‚¹è©³ç´°ã‚’å–å¾— |
| PROC-003 | ãƒ—ãƒ­ã‚»ã‚¹çµ±è¨ˆå–å¾— | **å¿…é ˆ** | ãƒ—ãƒ­ã‚»ã‚¹ç·æ•°ã€CPU/ãƒ¡ãƒ¢ãƒªå¹³å‡ç­‰ |
| PROC-004 | ãƒ•ã‚£ãƒ«ã‚¿æ©Ÿèƒ½ | **æ¨å¥¨** | ãƒ¦ãƒ¼ã‚¶ãƒ¼åã€ãƒ—ãƒ­ã‚»ã‚¹åã§ãƒ•ã‚£ãƒ«ã‚¿ |
| PROC-005 | ã‚½ãƒ¼ãƒˆæ©Ÿèƒ½ | **æ¨å¥¨** | CPU/ãƒ¡ãƒ¢ãƒªä½¿ç”¨ç‡ã€PIDé †ã§ã‚½ãƒ¼ãƒˆ |
| PROC-006 | ãƒšãƒ¼ã‚¸ãƒãƒ¼ã‚·ãƒ§ãƒ³ | **æ¨å¥¨** | å¤§é‡ãƒ—ãƒ­ã‚»ã‚¹ã®åˆ†å‰²è¡¨ç¤º |
| PROC-007 | ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ æ›´æ–° | **ã‚ªãƒ—ã‚·ãƒ§ãƒ³** | WebSocket or Polling |

---

### 3.2 PROC-001: ãƒ—ãƒ­ã‚»ã‚¹ä¸€è¦§å–å¾—

#### å…¥åŠ›

| ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ | å‹ | å¿…é ˆ | èª¬æ˜ | ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆ |
|------------|-----|------|------|-----------|
| `user` | string | No | ãƒ•ã‚£ãƒ«ã‚¿å¯¾è±¡ãƒ¦ãƒ¼ã‚¶ãƒ¼å | `null`ï¼ˆå…¨ãƒ¦ãƒ¼ã‚¶ãƒ¼ï¼‰ |
| `sort_by` | string | No | ã‚½ãƒ¼ãƒˆåŸºæº–ï¼ˆ`cpu`, `memory`, `pid`, `name`ï¼‰ | `cpu` |
| `order` | string | No | ã‚½ãƒ¼ãƒˆé †ï¼ˆ`asc`, `desc`ï¼‰ | `desc` |
| `limit` | integer | No | å–å¾—ä»¶æ•°ï¼ˆ1-1000ï¼‰ | `100` |
| `offset` | integer | No | ã‚ªãƒ•ã‚»ãƒƒãƒˆï¼ˆãƒšãƒ¼ã‚¸ãƒãƒ¼ã‚·ãƒ§ãƒ³ç”¨ï¼‰ | `0` |

#### å‡ºåŠ›

```json
{
  "status": "success",
  "data": {
    "processes": [
      {
        "pid": 1234,
        "name": "nginx",
        "user": "www-data",
        "cpu_percent": 2.5,
        "memory_percent": 1.8,
        "memory_rss_mb": 45.2,
        "state": "S",
        "started_at": "2026-02-06T10:00:00Z",
        "command": "/usr/sbin/nginx -g daemon off;"
      }
    ],
    "total_count": 256,
    "limit": 100,
    "offset": 0
  },
  "timestamp": "2026-02-06T12:34:56Z"
}
```

#### å‡¦ç†ãƒ•ãƒ­ãƒ¼

```
1. å…¥åŠ›ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã®ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³
   - user: è‹±æ•°å­— + ãƒã‚¤ãƒ•ãƒ³ + ã‚¢ãƒ³ãƒ€ãƒ¼ã‚¹ã‚³ã‚¢ã®ã¿
   - sort_by: è¨±å¯ãƒªã‚¹ãƒˆ["cpu", "memory", "pid", "name"]ã®ã¿
   - limit: 1-1000ã®ç¯„å›²
2. sudo ãƒ©ãƒƒãƒ‘ãƒ¼å‘¼ã³å‡ºã—
   - adminui-processes.sh [user] [sort_by] [order] [limit] [offset]
3. JSON ãƒ¬ã‚¹ãƒãƒ³ã‚¹ã®ãƒ‘ãƒ¼ã‚¹
4. ç›£æŸ»ãƒ­ã‚°è¨˜éŒ²
5. ãƒ¬ã‚¹ãƒãƒ³ã‚¹è¿”å´
```

---

### 3.3 PROC-002: ãƒ—ãƒ­ã‚»ã‚¹è©³ç´°å–å¾—

#### å…¥åŠ›

| ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ | å‹ | å¿…é ˆ | èª¬æ˜ |
|------------|-----|------|------|
| `pid` | integer | Yes | ãƒ—ãƒ­ã‚»ã‚¹IDï¼ˆ1-999999ï¼‰ |

#### å‡ºåŠ›

```json
{
  "status": "success",
  "data": {
    "pid": 1234,
    "name": "nginx",
    "user": "www-data",
    "cpu_percent": 2.5,
    "memory_percent": 1.8,
    "memory_rss_mb": 45.2,
    "memory_vms_mb": 120.5,
    "state": "S",
    "state_description": "Sleeping",
    "ppid": 1,
    "threads": 4,
    "started_at": "2026-02-06T10:00:00Z",
    "cwd": "/var/www/html",
    "command": "/usr/sbin/nginx -g daemon off;",
    "open_files": 32,
    "connections": 15
  },
  "timestamp": "2026-02-06T12:34:56Z"
}
```

#### ã‚¨ãƒ©ãƒ¼ãƒ¬ã‚¹ãƒãƒ³ã‚¹

```json
{
  "status": "error",
  "message": "Process not found",
  "details": {
    "pid": 99999
  }
}
```

---

### 3.4 PROC-003: ãƒ—ãƒ­ã‚»ã‚¹çµ±è¨ˆå–å¾—

#### å…¥åŠ›

ãªã—ï¼ˆå…¨ãƒ—ãƒ­ã‚»ã‚¹ã®çµ±è¨ˆã‚’è¿”ã™ï¼‰

#### å‡ºåŠ›

```json
{
  "status": "success",
  "data": {
    "total_processes": 256,
    "running": 3,
    "sleeping": 240,
    "stopped": 0,
    "zombie": 0,
    "total_cpu_percent": 12.5,
    "total_memory_percent": 45.8,
    "total_memory_mb": 2048.5,
    "top_cpu_processes": [
      {
        "pid": 1234,
        "name": "nginx",
        "cpu_percent": 5.2
      }
    ],
    "top_memory_processes": [
      {
        "pid": 5678,
        "name": "mysql",
        "memory_percent": 8.5
      }
    ]
  },
  "timestamp": "2026-02-06T12:34:56Z"
}
```

---

## 4. ãƒ‡ãƒ¼ã‚¿ãƒ¢ãƒ‡ãƒ«è¨­è¨ˆ

### 4.1 Process ã‚¨ãƒ³ãƒ†ã‚£ãƒ†ã‚£

```typescript
interface Process {
  // åŸºæœ¬æƒ…å ±
  pid: number;              // ãƒ—ãƒ­ã‚»ã‚¹IDï¼ˆ1-999999ï¼‰
  name: string;             // ãƒ—ãƒ­ã‚»ã‚¹åï¼ˆæœ€å¤§256æ–‡å­—ï¼‰
  user: string;             // å®Ÿè¡Œãƒ¦ãƒ¼ã‚¶ãƒ¼å

  // ãƒªã‚½ãƒ¼ã‚¹ä½¿ç”¨çŠ¶æ³
  cpu_percent: number;      // CPUä½¿ç”¨ç‡ï¼ˆ0.0-100.0ï¼‰
  memory_percent: number;   // ãƒ¡ãƒ¢ãƒªä½¿ç”¨ç‡ï¼ˆ0.0-100.0ï¼‰
  memory_rss_mb: number;    // å¸¸é§ãƒ¡ãƒ¢ãƒªã‚µã‚¤ã‚ºï¼ˆMBï¼‰
  memory_vms_mb?: number;   // ä»®æƒ³ãƒ¡ãƒ¢ãƒªã‚µã‚¤ã‚ºï¼ˆMBï¼‰- è©³ç´°ã®ã¿

  // ãƒ—ãƒ­ã‚»ã‚¹çŠ¶æ…‹
  state: ProcessState;      // ãƒ—ãƒ­ã‚»ã‚¹çŠ¶æ…‹ï¼ˆR/S/D/Z/Tï¼‰
  state_description?: string; // çŠ¶æ…‹èª¬æ˜ï¼ˆè©³ç´°ã®ã¿ï¼‰
  ppid?: number;            // è¦ªãƒ—ãƒ­ã‚»ã‚¹IDï¼ˆè©³ç´°ã®ã¿ï¼‰
  threads?: number;         // ã‚¹ãƒ¬ãƒƒãƒ‰æ•°ï¼ˆè©³ç´°ã®ã¿ï¼‰

  // æ™‚åˆ»æƒ…å ±
  started_at: string;       // èµ·å‹•æ™‚åˆ»ï¼ˆISO 8601å½¢å¼ï¼‰

  // ã‚³ãƒãƒ³ãƒ‰æƒ…å ±
  command: string;          // ã‚³ãƒãƒ³ãƒ‰ãƒ©ã‚¤ãƒ³ï¼ˆæœ€å¤§1024æ–‡å­—ï¼‰
  cwd?: string;             // ä½œæ¥­ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªï¼ˆè©³ç´°ã®ã¿ï¼‰

  // è©³ç´°æƒ…å ±ï¼ˆPROC-002ã®ã¿ï¼‰
  open_files?: number;      // ã‚ªãƒ¼ãƒ—ãƒ³ä¸­ã®ãƒ•ã‚¡ã‚¤ãƒ«æ•°
  connections?: number;     // ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯æ¥ç¶šæ•°
}

type ProcessState = "R" | "S" | "D" | "Z" | "T";
// R: Running, S: Sleeping, D: Disk sleep, Z: Zombie, T: Stopped
```

### 4.2 ProcessListResponse

```typescript
interface ProcessListResponse {
  status: "success" | "error";
  data?: {
    processes: Process[];
    total_count: number;
    limit: number;
    offset: number;
  };
  message?: string;        // ã‚¨ãƒ©ãƒ¼æ™‚ã®ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸
  timestamp: string;       // ISO 8601å½¢å¼
}
```

### 4.3 ProcessStatsResponse

```typescript
interface ProcessStatsResponse {
  status: "success" | "error";
  data?: {
    total_processes: number;
    running: number;
    sleeping: number;
    stopped: number;
    zombie: number;
    total_cpu_percent: number;
    total_memory_percent: number;
    total_memory_mb: number;
    top_cpu_processes: Array<{
      pid: number;
      name: string;
      cpu_percent: number;
    }>;
    top_memory_processes: Array<{
      pid: number;
      name: string;
      memory_percent: number;
    }>;
  };
  message?: string;
  timestamp: string;
}
```

---

## 5. ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£è¦ä»¶

### 5.1 å…¥åŠ›ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³

#### CRITICALï¼ˆå³åº§ã«æ‹’å¦ï¼‰

| ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ | æ¤œè¨¼ãƒ«ãƒ¼ãƒ« | æ‹’å¦æ¡ä»¶ |
|------------|-----------|---------|
| `pid` | æ•´æ•°ï¼ˆ1-999999ï¼‰ | ç¯„å›²å¤–ã€ç‰¹æ®Šæ–‡å­—ã€è² ã®å€¤ |
| `user` | `^[a-zA-Z0-9_-]+$` | ç‰¹æ®Šæ–‡å­—ï¼ˆ`;`, `\|`, `&`, `$`, `` ` ``, `(`, `)` ç­‰ï¼‰ |
| `sort_by` | Allowlist | `["cpu", "memory", "pid", "name"]` ä»¥å¤– |
| `order` | Allowlist | `["asc", "desc"]` ä»¥å¤– |
| `limit` | æ•´æ•°ï¼ˆ1-1000ï¼‰ | ç¯„å›²å¤– |
| `offset` | æ•´æ•°ï¼ˆ0-999999ï¼‰ | è² ã®å€¤ |

#### ç¦æ­¢æ–‡å­—ï¼ˆå³åº§ã«æ‹’å¦ï¼‰

```python
FORBIDDEN_CHARS = [";", "|", "&", "$", "(", ")", "`", ">", "<", "*", "?", "{", "}", "[", "]", "\n", "\r"]
```

### 5.2 ç›£æŸ»ãƒ­ã‚°è¨˜éŒ²é …ç›®

å…¨ã¦ã®æ“ä½œã§ä»¥ä¸‹ã‚’è¨˜éŒ²ï¼š

```json
{
  "timestamp": "2026-02-06T12:34:56Z",
  "operation": "process_list_view",
  "user_id": "admin@example.com",
  "target": "all_processes",
  "status": "success",
  "details": {
    "filters": {
      "user": "www-data",
      "sort_by": "cpu",
      "limit": 100
    },
    "result_count": 15
  }
}
```

### 5.3 æ¨©é™åˆ¶å¾¡

| æ“ä½œ | å¿…è¦æ¨©é™ | èª¬æ˜ |
|------|---------|------|
| ãƒ—ãƒ­ã‚»ã‚¹ä¸€è¦§å–å¾— | `read:processes` | å…¨ãƒ­ãƒ¼ãƒ«ï¼ˆViewerå«ã‚€ï¼‰ |
| ãƒ—ãƒ­ã‚»ã‚¹è©³ç´°å–å¾— | `read:processes` | å…¨ãƒ­ãƒ¼ãƒ« |
| ãƒ—ãƒ­ã‚»ã‚¹çµ±è¨ˆå–å¾— | `read:processes` | å…¨ãƒ­ãƒ¼ãƒ« |

**æ³¨æ„**: æœ¬ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã¯**å‚ç…§å°‚ç”¨**ã®ãŸã‚ã€å…¨ã¦ã®ãƒ­ãƒ¼ãƒ«ã§å®Ÿè¡Œå¯èƒ½ã€‚
v0.3ä»¥é™ã§killæ“ä½œã‚’è¿½åŠ ã™ã‚‹å ´åˆã¯ `execute:process_kill` æ¨©é™ã‚’æ–°è¨­ã™ã‚‹ã€‚

### 5.4 ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ãƒã‚§ãƒƒã‚¯ãƒªã‚¹ãƒˆ

#### ã‚³ãƒ¼ãƒ‰å®Ÿè£…æ™‚

- [ ] `shell=True` ã‚’ä½¿ç”¨ã—ã¦ã„ãªã„ã‹ï¼Ÿ
- [ ] ãƒ¦ãƒ¼ã‚¶ãƒ¼å…¥åŠ›ã‚’ç›´æ¥ã‚³ãƒãƒ³ãƒ‰ã«æ¸¡ã—ã¦ã„ãªã„ã‹ï¼Ÿ
- [ ] å¼•æ•°ã¯é…åˆ—å½¢å¼ã§æ¸¡ã—ã¦ã„ã‚‹ã‹ï¼Ÿ
- [ ] PIDã®ç¯„å›²æ¤œè¨¼ï¼ˆ1-999999ï¼‰ã‚’å®Ÿè£…ã—ã¦ã„ã‚‹ã‹ï¼Ÿ
- [ ] ç‰¹æ®Šæ–‡å­—ãƒ•ã‚£ãƒ«ã‚¿ã‚’å®Ÿè£…ã—ã¦ã„ã‚‹ã‹ï¼Ÿ
- [ ] ã‚¿ã‚¤ãƒ ã‚¢ã‚¦ãƒˆã‚’è¨­å®šã—ã¦ã„ã‚‹ã‹ï¼Ÿï¼ˆãƒ‡ãƒ•ã‚©ãƒ«ãƒˆ30ç§’ï¼‰

#### sudo ãƒ©ãƒƒãƒ‘ãƒ¼å®Ÿè£…æ™‚

- [ ] å…¥åŠ›æ¤œè¨¼ã‚’å®Ÿè£…ã—ã¦ã„ã‚‹ã‹ï¼Ÿ
- [ ] allowlist ã«ã‚ˆã‚‹å¼•æ•°ãƒã‚§ãƒƒã‚¯ã‚’å®Ÿè£…ã—ã¦ã„ã‚‹ã‹ï¼Ÿ
- [ ] `set -euo pipefail` ã‚’è¨­å®šã—ã¦ã„ã‚‹ã‹ï¼Ÿ
- [ ] å…¨ã¦ã®å¤‰æ•°ã‚’å¼•ç”¨ç¬¦ã§å›²ã‚“ã§ã„ã‚‹ã‹ï¼Ÿ
- [ ] å®Ÿè¡Œå‰/å®Ÿè¡Œå¾Œã®ãƒ­ã‚°ã‚’è¨˜éŒ²ã—ã¦ã„ã‚‹ã‹ï¼Ÿ
- [ ] ã‚¨ãƒ©ãƒ¼æ™‚ã«JSONå½¢å¼ã§ã‚¨ãƒ©ãƒ¼ã‚’è¿”ã—ã¦ã„ã‚‹ã‹ï¼Ÿ

#### ãƒ†ã‚¹ãƒˆå®Ÿè£…æ™‚

- [ ] æ­£å¸¸ç³»ãƒ†ã‚¹ãƒˆï¼ˆPIDå­˜åœ¨ã€ãƒ•ã‚£ãƒ«ã‚¿å‹•ä½œç¢ºèªï¼‰
- [ ] ç•°å¸¸ç³»ãƒ†ã‚¹ãƒˆï¼ˆPIDä¸æ­£ã€ç‰¹æ®Šæ–‡å­—æ³¨å…¥è©¦è¡Œï¼‰
- [ ] ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ãƒ†ã‚¹ãƒˆï¼ˆshell injection, command injectionï¼‰
- [ ] ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ãƒ†ã‚¹ãƒˆï¼ˆ1000+ãƒ—ãƒ­ã‚»ã‚¹æ™‚ã®å¿œç­”æ™‚é–“ï¼‰
- [ ] ã‚«ãƒãƒ¬ãƒƒã‚¸ **85%ä»¥ä¸Š**

---

## 6. ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹è¦ä»¶

| é …ç›® | ç›®æ¨™å€¤ | èª¬æ˜ |
|------|-------|------|
| APIå¿œç­”æ™‚é–“ | < 1ç§’ | ãƒ—ãƒ­ã‚»ã‚¹ä¸€è¦§å–å¾—ï¼ˆ100ä»¶ï¼‰ |
| APIå¿œç­”æ™‚é–“ | < 500ms | ãƒ—ãƒ­ã‚»ã‚¹è©³ç´°å–å¾— |
| APIå¿œç­”æ™‚é–“ | < 1.5ç§’ | ãƒ—ãƒ­ã‚»ã‚¹çµ±è¨ˆå–å¾— |
| ã‚¿ã‚¤ãƒ ã‚¢ã‚¦ãƒˆ | 30ç§’ | sudo ãƒ©ãƒƒãƒ‘ãƒ¼å®Ÿè¡Œ |
| ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ æ›´æ–°é–“éš” | 5ç§’ | ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ã‹ã‚‰ã®ãƒãƒ¼ãƒªãƒ³ã‚° |

---

## 7. ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°

### 7.1 ã‚¨ãƒ©ãƒ¼åŒºåˆ†

| ã‚¨ãƒ©ãƒ¼ã‚³ãƒ¼ãƒ‰ | HTTP Status | èª¬æ˜ | å¯¾å¿œ |
|--------------|------------|------|------|
| `PROC_NOT_FOUND` | 404 | PIDä¸å­˜åœ¨ | ãƒ¦ãƒ¼ã‚¶ãƒ¼ã«ã‚¨ãƒ©ãƒ¼è¡¨ç¤º |
| `INVALID_PID` | 400 | PIDç¯„å›²å¤–ãƒ»ä¸æ­£ | ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ã‚¨ãƒ©ãƒ¼è¡¨ç¤º |
| `INVALID_USER` | 400 | ãƒ¦ãƒ¼ã‚¶ãƒ¼åä¸æ­£ | ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ã‚¨ãƒ©ãƒ¼è¡¨ç¤º |
| `FORBIDDEN_CHAR` | 400 | ç‰¹æ®Šæ–‡å­—æ¤œå‡º | ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£è­¦å‘Šè¡¨ç¤º |
| `WRAPPER_ERROR` | 500 | sudo ãƒ©ãƒƒãƒ‘ãƒ¼å®Ÿè¡Œå¤±æ•— | å†…éƒ¨ã‚¨ãƒ©ãƒ¼è¡¨ç¤º |
| `TIMEOUT` | 504 | ã‚¿ã‚¤ãƒ ã‚¢ã‚¦ãƒˆ | ã‚¿ã‚¤ãƒ ã‚¢ã‚¦ãƒˆã‚¨ãƒ©ãƒ¼è¡¨ç¤º |

### 7.2 ã‚¨ãƒ©ãƒ¼ãƒ¬ã‚¹ãƒãƒ³ã‚¹å½¢å¼

```json
{
  "status": "error",
  "error_code": "INVALID_PID",
  "message": "Invalid process ID: must be between 1 and 999999",
  "details": {
    "field": "pid",
    "value": -1,
    "constraint": "1-999999"
  },
  "timestamp": "2026-02-06T12:34:56Z"
}
```

---

## 8. å®Ÿè£…ãƒ•ã‚§ãƒ¼ã‚º

### Phase 1: åŸºæœ¬å®Ÿè£…ï¼ˆv0.2-alphaï¼‰

- [ ] sudo ãƒ©ãƒƒãƒ‘ãƒ¼ä½œæˆï¼ˆ`adminui-processes.sh`ï¼‰
- [ ] API ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆå®Ÿè£…ï¼ˆãƒ—ãƒ­ã‚»ã‚¹ä¸€è¦§ãƒ»è©³ç´°ãƒ»çµ±è¨ˆï¼‰
- [ ] å…¥åŠ›ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³å®Ÿè£…
- [ ] ç›£æŸ»ãƒ­ã‚°è¨˜éŒ²
- [ ] å˜ä½“ãƒ†ã‚¹ãƒˆï¼ˆã‚«ãƒãƒ¬ãƒƒã‚¸85%ä»¥ä¸Šï¼‰

### Phase 2: UIå®Ÿè£…ï¼ˆv0.2-betaï¼‰

- [ ] ãƒ—ãƒ­ã‚»ã‚¹ä¸€è¦§ç”»é¢ï¼ˆHTML/JSï¼‰
- [ ] ãƒ—ãƒ­ã‚»ã‚¹è©³ç´°ãƒ¢ãƒ¼ãƒ€ãƒ«
- [ ] ãƒ•ã‚£ãƒ«ã‚¿ãƒ»ã‚½ãƒ¼ãƒˆæ©Ÿèƒ½
- [ ] ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ æ›´æ–°ï¼ˆãƒãƒ¼ãƒªãƒ³ã‚°ï¼‰

### Phase 3: æœ€é©åŒ–ï¼ˆv0.2-rcï¼‰

- [ ] ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ãƒ†ã‚¹ãƒˆ
- [ ] ã‚­ãƒ£ãƒƒã‚·ãƒ³ã‚°å®Ÿè£…ï¼ˆ5ç§’é–“éš”ï¼‰
- [ ] ãƒšãƒ¼ã‚¸ãƒãƒ¼ã‚·ãƒ§ãƒ³æ”¹å–„
- [ ] ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£æœ€çµ‚ãƒ¬ãƒ“ãƒ¥ãƒ¼

---

## 9. ä¾å­˜é–¢ä¿‚

### 9.1 å¿…è¦ãªLinuxã‚³ãƒãƒ³ãƒ‰

| ã‚³ãƒãƒ³ãƒ‰ | ç”¨é€” | ä»£æ›¿æ¡ˆ |
|---------|------|--------|
| `ps` | ãƒ—ãƒ­ã‚»ã‚¹ä¸€è¦§å–å¾— | - |
| `/proc` | ãƒ—ãƒ­ã‚»ã‚¹è©³ç´°æƒ…å ± | - |
| `awk` / `sed` | ãƒ†ã‚­ã‚¹ãƒˆå‡¦ç† | - |

### 9.2 å¿…è¦ãªPythonãƒ©ã‚¤ãƒ–ãƒ©ãƒª

```python
# backend/requirements.txt ã«è¿½åŠ 
# ï¼ˆæ—¢å­˜ã®ã‚‚ã®ã¯å¤‰æ›´ãªã—ï¼‰
```

---

## 10. ãƒ†ã‚¹ãƒˆè¨ˆç”»

### 10.1 å˜ä½“ãƒ†ã‚¹ãƒˆ

```python
# tests/test_processes.py

def test_get_process_list_success():
    """ãƒ—ãƒ­ã‚»ã‚¹ä¸€è¦§å–å¾—ï¼ˆæ­£å¸¸ç³»ï¼‰"""
    pass

def test_get_process_detail_success():
    """ãƒ—ãƒ­ã‚»ã‚¹è©³ç´°å–å¾—ï¼ˆæ­£å¸¸ç³»ï¼‰"""
    pass

def test_get_process_stats_success():
    """ãƒ—ãƒ­ã‚»ã‚¹çµ±è¨ˆå–å¾—ï¼ˆæ­£å¸¸ç³»ï¼‰"""
    pass

def test_reject_invalid_pid():
    """ä¸æ­£ãªPIDã‚’æ‹’å¦ã™ã‚‹ã“ã¨"""
    pass

def test_reject_special_characters_in_user():
    """ç‰¹æ®Šæ–‡å­—ã‚’å«ã‚€ãƒ¦ãƒ¼ã‚¶ãƒ¼åã‚’æ‹’å¦ã™ã‚‹ã“ã¨"""
    pass

def test_reject_invalid_sort_by():
    """è¨±å¯ãƒªã‚¹ãƒˆå¤–ã®ã‚½ãƒ¼ãƒˆåŸºæº–ã‚’æ‹’å¦ã™ã‚‹ã“ã¨"""
    pass
```

### 10.2 ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ãƒ†ã‚¹ãƒˆ

```python
def test_shell_injection_in_pid():
    """PIDãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã§ã®shell injectionè©¦è¡Œã‚’æ‹’å¦"""
    malicious_pid = "1234; rm -rf /"
    with pytest.raises(ValidationError):
        get_process_detail(malicious_pid)

def test_command_injection_in_user():
    """userãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã§ã®command injectionè©¦è¡Œã‚’æ‹’å¦"""
    malicious_user = "www-data | cat /etc/passwd"
    with pytest.raises(ValidationError):
        get_process_list(user=malicious_user)
```

### 10.3 ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ãƒ†ã‚¹ãƒˆ

```python
def test_process_list_performance():
    """ãƒ—ãƒ­ã‚»ã‚¹ä¸€è¦§å–å¾—ãŒ1ç§’ä»¥å†…ã«å®Œäº†ã™ã‚‹ã“ã¨"""
    import time
    start = time.time()
    result = get_process_list(limit=100)
    elapsed = time.time() - start
    assert elapsed < 1.0
    assert len(result["data"]["processes"]) <= 100
```

---

## 11. å°†æ¥æ‹¡å¼µï¼ˆv0.3ä»¥é™ï¼‰

### 11.1 ãƒ—ãƒ­ã‚»ã‚¹æ“ä½œæ©Ÿèƒ½ï¼ˆæ‰¿èªãƒ•ãƒ­ãƒ¼å¿…é ˆï¼‰

| æ©Ÿèƒ½ | å®Ÿè£…ãƒ•ã‚§ãƒ¼ã‚º | ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ãƒªã‚¹ã‚¯ |
|------|--------------|------------------|
| ãƒ—ãƒ­ã‚»ã‚¹killï¼ˆSIGTERMï¼‰ | v0.3 | **HIGH** |
| ãƒ—ãƒ­ã‚»ã‚¹killï¼ˆSIGKILLï¼‰ | v0.3 | **CRITICAL** |
| ãƒ—ãƒ­ã‚»ã‚¹å„ªå…ˆåº¦å¤‰æ›´ï¼ˆreniceï¼‰ | v0.4 | **MEDIUM** |

### 11.2 é«˜åº¦ãªãƒ•ã‚£ãƒ«ã‚¿æ©Ÿèƒ½

- ãƒ—ãƒ­ã‚»ã‚¹ãƒ„ãƒªãƒ¼è¡¨ç¤ºï¼ˆè¦ªå­é–¢ä¿‚ã®å¯è¦–åŒ–ï¼‰
- ãƒ—ãƒ­ã‚»ã‚¹ã‚°ãƒ«ãƒ¼ãƒ—ç®¡ç†
- ãƒªã‚½ãƒ¼ã‚¹åˆ¶é™è¨­å®šï¼ˆcgroupé€£æºï¼‰

---

## 12. æ‰¿èªãƒ»ãƒ¬ãƒ“ãƒ¥ãƒ¼

| å½¹å‰² | æ‰¿èªè€… | æ‰¿èªæ—¥ | ç½²å |
|------|-------|--------|------|
| è¦ä»¶å®šç¾© | spec-planner (AI) | 2026-02-06 | âœ… |
| è¨­è¨ˆãƒ¬ãƒ“ãƒ¥ãƒ¼ | arch-reviewer (AI) | - | - |
| ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ãƒ¬ãƒ“ãƒ¥ãƒ¼ | @Security (AI) | - | - |
| äººé–“æ‰¿èª | Team Lead | - | - |

---

## 13. å‚ç…§ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ

* [CLAUDE.md](../CLAUDE.md) - ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆé–‹ç™ºä»•æ§˜æ›¸
* [è¦ä»¶å®šç¾©æ›¸_è©³ç´°è¨­è¨ˆä»•æ§˜æ›¸.md](./è¦ä»¶å®šç¾©æ›¸_è©³ç´°è¨­è¨ˆä»•æ§˜æ›¸.md) - ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆå…¨ä½“è¦ä»¶
* [SECURITY.md](../SECURITY.md) - ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ãƒãƒªã‚·ãƒ¼

---

**ğŸ“Œ æœ¬ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã¯å®Ÿè£…å‰ã« arch-reviewer / @Security ã«ã‚ˆã‚‹ãƒ¬ãƒ“ãƒ¥ãƒ¼ãŒå¿…é ˆã§ã™ã€‚**
